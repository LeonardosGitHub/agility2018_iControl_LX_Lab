

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>Lab 6.2 - Run playbook to create ASM policy and associate with virtual server &mdash; Agility18 iControlLX Extensions Lab  documentation</title>
  

  
  
  
  

  

  
  
    

  

  <link rel="stylesheet" href="../../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../../_static/pygments.css" type="text/css" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="prev" title="Lab 6.1 - Brief overview of our Ansible setup" href="lab1.html" /> 

  
  <script src="../../_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="../../index.html" class="icon icon-home"> Agility18 iControlLX Extensions Lab
          

          
          </a>

          
            
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <p class="caption"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../class1.html">Class 1 - F5 iControl LX extensions</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="../module0/module0.html">Module 0 - Accessing the Lab Environment</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module1/module1.html">Module 1 - Understanding the iControl LX Architecture</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module2/module2.html">Module 2 - Interacting with an iControl LX extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module3/module3.html">Module 3 - Understanding iControl LX Extensions</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module4/module4.html">Module 4 - Installing the HelloWorld extension</a></li>
<li class="toctree-l2"><a class="reference internal" href="../module5/module5.html">Module 5 - Installing and Using iControlLX extension to create an ASM policy</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="module6.html">Module 6 - Using Ansible to create an ASM policy and associate it with a Virtual Server</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="lab1.html">Lab 6.1 - Brief overview of our Ansible setup</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">Lab 6.2 - Run playbook to create ASM policy and associate with virtual server</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#task-1-run-playbook-from-the-ubuntu-host">Task 1 - Run playbook from the Ubuntu host</a></li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../../index.html">Agility18 iControlLX Extensions Lab</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../../index.html">Docs</a> &raquo;</li>
        
          <li><a href="../class1.html">Class 1 - F5 iControl LX extensions</a> &raquo;</li>
        
          <li><a href="module6.html">Module 6 - Using Ansible to create an ASM policy and associate it with a Virtual Server</a> &raquo;</li>
        
      <li>Lab 6.2 - Run playbook to create ASM policy and associate with virtual server</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../../_sources/class1/module6/lab2.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="lab-6-2-run-playbook-to-create-asm-policy-and-associate-with-virtual-server">
<h1>Lab 6.2 - Run playbook to create ASM policy and associate with virtual server<a class="headerlink" href="#lab-6-2-run-playbook-to-create-asm-policy-and-associate-with-virtual-server" title="Permalink to this headline">¶</a></h1>
<p>In this lesson we will use Ansible to deploy a new ASM policy and attach that policy
to an existing virtual server.</p>
<div class="section" id="task-1-run-playbook-from-the-ubuntu-host">
<h2>Task 1 - Run playbook from the Ubuntu host<a class="headerlink" href="#task-1-run-playbook-from-the-ubuntu-host" title="Permalink to this headline">¶</a></h2>
<ol class="arabic">
<li><p class="first">On your Xubuntu host you should be at a prompt that looks like this:</p>
<p><code class="docutils literal notranslate"><span class="pre">external_user&#64;xubuntu-vm:~/f5-ansible$</span></code></p>
<p>You should be in the “f5-ansible” directory.</p>
</li>
<li><p class="first">At the prompt type the following:</p>
<p><code class="docutils literal notranslate"><span class="pre">ansible-playbook</span> <span class="pre">playbooks/ASM_create_apply.yml</span></code></p>
<p>Once you execute the above command you will see the playbook executing, you’ll be able
to view each task executing and the status of each task.  The last two lines will give
you a summary of the playbook execution and will indicate if it was ok or failed. The
playbook will take up to 30 seconds to complete.  Also note you will see some comments
about some <code class="docutils literal notranslate"><span class="pre">DEPRECATION</span> <span class="pre">WARNING</span></code> messages, this can be ignored for this lab.</p>
<div class="admonition note">
<p class="first admonition-title">Note</p>
<p>If you wish To view the contents of the playbook you can use the following command</p>
<p class="last"><code class="docutils literal notranslate"><span class="pre">cat</span> <span class="pre">playbooks/ASM_create_apply.yml</span></code></p>
</div>
</li>
<li><p class="first">First lets look to see if an ASM policy has been created, it should have the name
<code class="docutils literal notranslate"><span class="pre">iControlLX_Agility2018_Ansible</span></code>. Navigate to Main &gt; Security &gt; Application Security &gt;
Security Policies to view the ASM policies.</p>
<a class="reference internal image-reference" href="../../_images/lab2-image0012.png"><img alt="../../_images/lab2-image0012.png" class="align-center" src="../../_images/lab2-image0012.png" style="width: 738.0px; height: 313.0px;" /></a>
</li>
<li><p class="first">Now lets look at the virtual server to see if the policy has been associated. Navigate
to Main &gt; Local Traffic &gt; Virtual Server &gt; Virtual Server List then select <code class="docutils literal notranslate"><span class="pre">hackazon_virtual</span></code>.
Once selected navigate to Security &gt; Policies.</p>
<a class="reference internal image-reference" href="../../_images/lab2-image0022.png"><img alt="../../_images/lab2-image0022.png" class="align-center" src="../../_images/lab2-image0022.png" style="width: 728.0px; height: 436.0px;" /></a>
</li>
<li><p class="first">Congrats you’ve now created an ASM policy and associated it with a virtual server all in one step!!</p>
</li>
</ol>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
      
        <a href="lab1.html" class="btn btn-neutral" title="Lab 6.1 - Brief overview of our Ansible setup" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2018, F5 Networks.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'../../',
            VERSION:'',
            LANGUAGE:'None',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="../../_static/jquery.js"></script>
      <script type="text/javascript" src="../../_static/underscore.js"></script>
      <script type="text/javascript" src="../../_static/doctools.js"></script>

  

  <script type="text/javascript" src="../../_static/js/theme.js"></script>

  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script> 

</body>
</html>